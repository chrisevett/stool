language: go
go:
- 1.8
- 1.9
- master

install:
    - go get -v github.com/onsi/ginkgo/ginkgo
    - go get -v github.com/onsi/gomega
    - go get -v -t ./...
    - export PATH=$PATH:$HOME/gopath/bin

script: ginkgo -r --randomizeAllSpecs --randomizeSuites --failOnPending --cover --trace --race --compilers=2

deploy:
  skip_cleanup: true
  provider: releases
  api_key:
    secure: $GHK
  file: ./stool
  on:
    repo: chrisevett/stool
